{"version":3,"sources":["webpack:///./scripts/fetchCountries.js"],"names":["htmlArea","document","querySelector","input","addEventListener","debounce","userInput","searchText","value","fetch","then","response","json","data","number","length","innerHTML","alert","text","success","PNotifySuccess","html","forEach","country","flag","name","capital","population","languages","map","language","renderHtmlFrom","status","error","catch","console","log"],"mappings":"6NAMMA,G,oBAAWC,SAASC,cAAc,eAClCC,EAAQF,SAASC,cAAc,WA+ErCC,EAAMC,iBAAiB,QAASC,GAhCT,SAACC,GACtB,IAAMC,EAAaJ,EAAMK,MAEzBC,MADoB,yCAAyCF,GAE5DG,MAAK,SAAAC,GACJ,OAAOA,EAASC,UAEjBF,MAAK,SAAAG,GACJ,IApDoBC,EAoDdC,EAASF,EAAKE,OAGpB,OAdFf,EAASgB,UAAY,GAchBD,EAAS,IAvDQD,EAwDMC,EAxDKE,gBAAM,CACjCC,KAAM,WAAWJ,EAAb,+CA0DJC,EAAS,GAlDM,SAACD,GAAWK,kBAAQ,CACzCD,KAAM,kBAAkBJ,EAApB,MAkDEM,CAAeL,GAzCA,SAACF,GACtB,IAAIQ,EAAO,GAkBX,OAjBAR,EAAKS,SAAQ,SAAAC,GACbF,GAAI,iIAIwCE,EAAQC,KAJhD,UAI8DD,EAAQE,KAJtE,mGAOkCF,EAAQE,KAP1C,6DAQ+CF,EAAQG,QARvD,oEASqDH,EAAQI,WAT7D,mEAUqEJ,EAAQK,UAjBzDC,KAAI,SAAAC,GAAQ,OAAIA,EAASL,QAO7C,0DAeJzB,EAASgB,UAAYK,EACdR,EAuBMkB,CAAelB,SAIR,KAAfA,EAAKmB,QA5DeC,gBAAM,CAC/Bf,KAAM,0BAgELgB,OAAM,SAAAD,GACLE,QAAQC,IAAIH,QAKyC,Q","file":"main.790ccdbf99ba5f0c8220.js","sourcesContent":["import * as debounce from 'lodash.debounce'\nimport { alert, success, error } from '@pnotify/core';\nimport \"@pnotify/core/dist/PNotify.css\";\nimport \"@pnotify/core/dist/BrightTheme.css\";\n\n// variables\nconst htmlArea = document.querySelector(\"#countries\")\nconst input = document.querySelector(\"#search\")\n\n//notifications\nconst PNotifyWarning = (number) => alert({\n        text: `Найдено ${number} стран, укажите более конкретное название`\n  });\n\n\nconst PNotifyError = () => error({\n  text: \"Ничего не найдено\"\n});\n\nconst PNotifySuccess = (number) => success({\n  text: `Найдено стран: ${number} `\n});\n  \n//functions\nconst showLanguagesFrom = (array) => {\n  const languages = array.map(language => language.name)\n  return languages\n}\n\nconst renderHtmlFrom = (data) => {\n  let html = \"\"\n  data.forEach(country => {\n  html +=\n    `<div class=\"country\">\n      <div class=\"row\">\n          <div class=\"col-sm-6\">\n            <img class=\"country__flag\" src=\"${country.flag}\" alt=\"${country.name}\" />\n          </div>\n          <div class=\"col-sm-6\">\n            <h2 class=\"country__name\">${country.name}</h2>\n            <div class=\"country__capital\">Capital: ${country.capital}</div>\n            <div class=\"country__population\">Population: ${country.population}</div>\n            <div class=\"country__languages\">Languages: ${showLanguagesFrom(country.languages)} </div>\n          </div>\n      </div>\n    </div>`\n  })\n  htmlArea.innerHTML = html\n  return data\n}\nconst cleanHtml = () => {\n  htmlArea.innerHTML = \"\"\n}\n\nconst fetchCountries = (userInput) => {\n  const searchText = input.value\n  const searchQuery = `https://restcountries.eu/rest/v2/name/${searchText}`\n  fetch(searchQuery)\n  .then(response => {\n    return response.json()\n  })\n  .then(data => {\n    const length = data.length\n    cleanHtml()\n\n    if(length > 10) {\n        return PNotifyWarning(length);\n    }\n\n    if (length > 0) {\n        PNotifySuccess(length)\n        return renderHtmlFrom(data)\n    }\n\n\n    if(data.status == 404) {\n      PNotifyError()\n    }\n\n})\n  .catch(error => {\n    console.log(error)\n  });\n\n}\n\ninput.addEventListener(\"input\", debounce(fetchCountries, 5000))\n"],"sourceRoot":""}